<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera OCR App</title>
</head>
<body>
    <h1>Take a Picture for OCR</h1>

    <!-- Image upload input using iPhone camera -->
    <input type="file" accept="image/*" capture="camera" id="cameraInput">
    
    <!-- Preview the captured image -->
    <img id="preview" src="#" alt="Image Preview" style="max-width: 100%; display: none;">

    <!-- Button to trigger OCR -->
    <button id="processImage" style="display: none;">Process Image</button>

    <!-- Output the recognized text -->
    <p id="ocrResult"></p>

    <!-- Include Tesseract.js -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@v4.0.2/dist/tesseract.min.js"></script>
    
    <script>
        const cameraInput = document.getElementById('cameraInput');
        const preview = document.getElementById('preview');
        const processImageButton = document.getElementById('processImage');
        const ocrResult = document.getElementById('ocrResult');

        // Event listener for file input change
        cameraInput.addEventListener('change', function(event) {
            const file = event.target.files[0];

            if (file) {
                const reader = new FileReader();

                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                    processImageButton.style.display = 'block';
                };

                reader.readAsDataURL(file);
            }
        });

        // Event listener for OCR button click
        processImageButton.addEventListener('click', function() {
            ocrResult.innerText = 'Processing...';

            Tesseract.recognize(
                preview.src, // Image to be processed
                'eng', // Language for OCR
                {
                    logger: function(m) {
                        console.log(m);
                    }
                }
            ).then(({ data: { text } }) => {
                ocrResult.innerText = text;
            }).catch(error => {
                ocrResult.innerText = 'Error: ' + error;
            });
        });
    </script>
</body>
</html>
